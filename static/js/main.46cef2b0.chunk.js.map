{"version":3,"sources":["components/Header/Header.module.css","redux/app-reducer.js","redux/redux-store.js","assets/images/settings.svg","assets/images/news.svg","assets/images/notes.svg","assets/images/dialogs.svg","assets/images/music.svg","assets/images/people.svg","assets/images/person.svg","components/Navbar/Navbar.jsx","assets/images/logout.png","assets/images/logo.svg","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","hoc/WithSuspense.js","App.js","index.js","redux/auth-reducer.js","hoc/WithAuthRedirect.js","redux/profile-reducer.js","redux/dialogs-reducer.js","api/api.js","redux/localStorage-reducer.js","redux/setting-reducer.js","components/Navbar/Navbar.module.css","utils/helpers.js","redux/users-reducer.js"],"names":["module","exports","INITIALED_SUCCESS","initialState","initialized","appReducer","state","action","type","reducers","combineReducers","app","auth","authReducer","profilePage","profileReducer","dialogsPage","dialogsReducer","usersPage","usersReducer","settings","settingReducer","localStorage","localStorageReducer","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Navbar","className","s","nav","item","to","activeClassName","active","item_img","src","personIcon","alt","dialogsIcon","newsIcon","musicIcon","settingsIcon","notesIcon","peopleIcon","Header","props","css","header","header_container","href","process","logo_link","logo","logoIcon","isAuth","log","toProfile","login","logout","onClick","logOut","logoutIcon","HeaderContainer","this","React","Component","mapDispatchToProps","connect","WithSuspense","fallback","Login","lazy","SettingContainer","ProfileContainer","DialogsContainer","News","Music","UsersContainer","Notes","ContentWithRedirect","WithAuthRedirect","path","render","App","initializeApp","exact","WithRouterApp","withRouter","dispatch","promise","getAuthUserInfo","Promise","all","then","AppWrapper","ReactDOM","document","getElementById","SET_USER_INFO","SET_USER_DATA","SET_CAPTCHA","userId","email","captchaUrl","userData","setAuthUserInfo","payload","setAuthUserData","data","a","authApi","me","res","resultCode","id","getAuthUserData","usersApi","getUserInfo","logIn","password","rememberMe","captcha","message","messages","length","getCaptchaUrl","stopSubmit","_error","securityApi","url","RedirectComponent","ADD_POST","SET_USER_PROFILE","SET_STATUS","SET_PHOTO","posts","userProfile","userProfileStatus","addPost","newPostText","getState","Date","getTime","likeCount","avatar","photos","small","setUserProfile","setStatus","status","getStatus","profileApi","updateStatus","savePhoto","file","SET_DIALOGS","SET_MESSAGES","UPDATE_MESSAGES","SET_TOTAL_COUNT_MESSAGES","SET_PAGE_MESSAGES","RESET_MESSAGES","SET_INTERLOCUTOR","RESET_INTERLOCUTOR","SET_IS_TOTAL_LOAD_MESSAGES","RESET_TO_DEFAULT_STATE","dialogs","pageMessages","countMessages","totalCountMessages","interlocutor","isTotalLoadMessages","setMessages","resetMessages","setTotalCountMessages","setPageMessages","setIsTotalLoadMessages","resetToDefaultState","getDialogs","dialogApi","Array","isArray","getMessages","pageMessagesNumber","items","totalCount","startChatting","console","sendMessage","reset","getInterlocutor","instance","axios","baseURL","withCredentials","headers","getUsers","currentPage","pageSize","term","friend","isTerm","isFriend","get","addFollow","post","catch","err","deleteFollow","delete","getStatusProfile","setAuthUserStatus","put","page","count","body","formData","FormData","append","updateProfileData","SAVE","initialStorage","obj","Object","keys","forEach","field","JSON","parse","error","save","key","value","setItem","stringify","notes","THEME","theme","themeList","label","language","languageList","messageText","instagram","facebook","mainLink","website","twitter","youtube","github","vk","contacts","updateObjInArray","updateItemId","findPropsName","updateProps","map","FOLLOW","UNFOLLOW","SET_USERS","SET_TOTAL_COUNT_USERS","SET_CURRENT_PAGE","SET_IS_FETCHING","SET_FOLLOWS_FETCHING","users","totalCountUsers","isFetching","followsFetching","setFollow","setUnfollow","setCurrentPage","setIsFetching","setFollowsFetching","followUnfollowFlow","apiMethod","actionCreator","follow","bind","unfollow","followed","filter"],"mappings":"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","file":"static/js/main.46cef2b0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3UXaC\",\"header_container\":\"Header_header_container__3Yf4g\",\"logo_link\":\"Header_logo_link__3ceNE\",\"logo\":\"Header_logo__3sOgX\",\"auth\":\"Header_auth__2PInC\",\"toProfile\":\"Header_toProfile__2Zb-v\",\"log\":\"Header_log__3y-pV\",\"logout\":\"Header_logout__14hce\"};","import {getAuthUserInfo} from \"./auth-reducer\";\r\n\r\nconst INITIALED_SUCCESS = \"INITIALED_SUCCESS\";\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case INITIALED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const initialedSuccess = () => ({\r\n    type: INITIALED_SUCCESS\r\n})\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n    let promise = dispatch(getAuthUserInfo());\r\n\r\n    Promise\r\n        .all([promise])\r\n        .then(() => {\r\n            dispatch(initialedSuccess())\r\n        })\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\";\r\nimport localStorageReducer from \"./localStorage-reducer.js\";\r\nimport settingReducer from \"./setting-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    app: appReducer,\r\n    auth: authReducer,\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    settings: settingReducer,\r\n    localStorage: localStorageReducer,\r\n    form: formReducer\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(\r\n    applyMiddleware(thunkMiddleware)\r\n));\r\n\r\nwindow.store = store;\r\n\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;","export default __webpack_public_path__ + \"static/media/settings.6c0f6d23.svg\";","export default __webpack_public_path__ + \"static/media/news.56314766.svg\";","export default __webpack_public_path__ + \"static/media/notes.21f088ef.svg\";","export default __webpack_public_path__ + \"static/media/dialogs.0ca48085.svg\";","export default __webpack_public_path__ + \"static/media/music.114eeb10.svg\";","export default __webpack_public_path__ + \"static/media/people.1b23320b.svg\";","export default __webpack_public_path__ + \"static/media/person.24d0a4a7.svg\";","import s from './Navbar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport settingsIcon from '../../assets/images/settings.svg';\r\nimport newsIcon from '../../assets/images/news.svg';\r\nimport notesIcon from '../../assets/images/notes.svg';\r\nimport dialogsIcon from '../../assets/images/dialogs.svg';\r\nimport musicIcon from '../../assets/images/music.svg';\r\nimport peopleIcon from '../../assets/images/people.svg';\r\nimport personIcon from '../../assets/images/person.svg'\r\n\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={s.nav}>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/profile\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={personIcon} alt={\"\"}/>\r\n                    Профиль\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={dialogsIcon} alt={\"\"}/>\r\n                    Сообщения\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/news\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={newsIcon} alt={\"\"}/>\r\n                    Новости\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/music\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={musicIcon} alt={\"\"}/>\r\n                    Музыка\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/setting\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={settingsIcon} alt={\"\"}/>\r\n                    Настройки\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/notes\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={notesIcon} alt={\"\"}/>\r\n                    Записи\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/users\" activeClassName={s.active}>\r\n                    <img className={s.item_img} src={peopleIcon} alt={\"\"}/>\r\n                    Пользователи\r\n                </NavLink>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n\r\n","export default __webpack_public_path__ + \"static/media/logout.e2f590b5.png\";","export default __webpack_public_path__ + \"static/media/logo.00a8b0a6.svg\";","import css from './Header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport logoutIcon from '../../assets/images/logout.png';\r\nimport logoIcon from \"../../assets/images/logo.svg\"\r\n\r\nconst Header = (props) => {\r\n    return (\r\n        <header className={css.header}>\r\n            <div className={css.header_container}>\r\n                <a href={process.env.PUBLIC_URL} className={css.logo_link}>\r\n                    <img className={css.logo} src={logoIcon} alt=\"\"/>\r\n                </a>\r\n                {\r\n                    props.isAuth\r\n                        ?\r\n                            <div className={css.log}>\r\n                                <NavLink to={\"/profile\"} className={css.toProfile}>{props.login}</NavLink>\r\n                                <img className={css.logout} onClick={props.logOut} src={logoutIcon} alt=\"\"/>\r\n                            </div>\r\n                        :\r\n                            <div className={css.auth}>\r\n                                <NavLink to={\"/login\"} >login</NavLink>\r\n                            </div>\r\n                }\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logOut} from \"../../redux/auth-reducer\";\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return (\r\n            <Header {...this.props} />\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state.auth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    logOut\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer)","import {Suspense} from \"react\";\r\n\r\nconst WithSuspense = (Component) => {\r\n    return (props) => {\r\n        return (\r\n            <Suspense fallback={null}>\r\n                <Component {...props}/>\r\n            </Suspense>\r\n        )\r\n    }\r\n}\r\n\r\nexport default WithSuspense;","import './App.css';\r\nimport {Route, withRouter, Switch, HashRouter, Redirect, BrowserRouter} from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport store from \"./redux/redux-store\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\n\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport WithSuspense from \"./hoc/WithSuspense\";\r\nimport {WithAuthRedirect} from \"./hoc/WithAuthRedirect\";\r\n\r\nconst Login            = React.lazy(() => import('./components/Login/Login'));\r\nconst SettingContainer = React.lazy(() => import('./components/Setting/SettingContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst News             = React.lazy(() => import('./components/News/News'));\r\nconst Music            = React.lazy(() => import('./components/Music/Music'));\r\nconst UsersContainer   = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst Notes            = React.lazy(() => import('./components/Notes/Notes'));\r\n\r\nconst Content = () => {\r\n    return (\r\n        <div className=\"app-wrapper\">\r\n            <Navbar/>\r\n            <div className=\"app-wrapper__content\">\r\n                <Route path=\"/news\"    render={ WithSuspense(News) } />\r\n                <Route path=\"/music\"   render={ WithSuspense(Music) } />\r\n                <Route path=\"/setting\" render={ WithSuspense(SettingContainer) } />\r\n                <Route path=\"/users\"   render={ WithSuspense(UsersContainer) } />\r\n                <Route path=\"/notes\"   render={ WithSuspense(Notes) } />\r\n                <Route path=\"/dialogs\" render={ WithSuspense(DialogsContainer) }/>\r\n                <Route path=\"/profile/:userId?\" render={ WithSuspense(ProfileContainer) }/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ContentWithRedirect = compose(\r\n    WithAuthRedirect\r\n)(Content)\r\n\r\nclass App extends React.Component {\r\n    componentDidMount() {\r\n        this.props.initializeApp();\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.initialized) {\r\n            return null\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Switch>\r\n                    <Route exact path=\"/\">\r\n                        <Redirect to={process.env.PUBLIC_URL} />\r\n                    </Route>\r\n                    <Route exact path={process.env.PUBLIC_URL}>\r\n                        <HeaderContainer/>\r\n                        <HashRouter>\r\n                            <Switch>\r\n                                <Route path=\"/login\" render={ WithSuspense(Login) }/>\r\n                                <Route exact path=\"/\">\r\n                                    <Redirect to={\"/profile\"} />\r\n                                </Route>\r\n                                <Route path=\"/\">\r\n                                    <ContentWithRedirect />\r\n                                </Route>\r\n                            </Switch>\r\n                        </HashRouter>\r\n                    </Route>\r\n                </Switch>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    initialized: state.app.initialized\r\n})\r\n\r\nconst WithRouterApp = compose(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializeApp})\r\n)(App);\r\n\r\n\r\nconst AppWrapper = () => {\r\n    return (\r\n        <BrowserRouter>\r\n            <Provider store={store}>\r\n                <WithRouterApp />\r\n            </Provider>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default AppWrapper;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport AppWrapper from \"./App\";\r\n\r\n\r\nReactDOM.render(<AppWrapper />, document.getElementById('root'));\r\n","import {securityApi, authApi, usersApi} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_INFO = \"SET_USER_INFO\";\r\nconst SET_USER_DATA = \"SET_USER_DATA\";\r\nconst SET_CAPTCHA = \"SET_CAPTCHA\";\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    login: null,\r\n    email: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n    userData: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_USER_INFO:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                userData: {...action.payload}\r\n            };\r\n        case SET_CAPTCHA:\r\n            return {\r\n                ...state,\r\n                captchaUrl: action.captchaUrl\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setAuthUserInfo = (userId, login, email, isAuth) => ({\r\n    type: SET_USER_INFO,\r\n    payload: {\r\n        userId,\r\n        login,\r\n        email,\r\n        isAuth\r\n    }\r\n})\r\n\r\nexport const setAuthUserData = (data) => ({\r\n    type: SET_USER_DATA,\r\n    payload: data\r\n})\r\n\r\nexport const setCaptchaUrl = (captchaUrl) => ({\r\n    type: SET_CAPTCHA,\r\n    captchaUrl\r\n})\r\n\r\nexport const getAuthUserInfo = () => async (dispatch) => {\r\n    const res = await authApi.me();\r\n\r\n    if(res.resultCode === 0) {\r\n        let {id, login, email} = res.data;\r\n        let isAuth = res.resultCode === 0 ? true : false;\r\n        dispatch(setAuthUserInfo(id, login, email, isAuth));\r\n        dispatch(getAuthUserData(id));\r\n    }\r\n}\r\n\r\nexport const getAuthUserData = (userId) => async (dispatch) => {\r\n    const res = await usersApi.getUserInfo(userId);\r\n    dispatch(setAuthUserData(res));\r\n}\r\n\r\n\r\nexport const logIn = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n    const res = await authApi.logIn(email, password, rememberMe, captcha)\r\n\r\n    let message = res.messages.length ? res.messages[0] : \"Some error\";\r\n\r\n    if(res.resultCode === 0) {\r\n        dispatch(getAuthUserInfo())\r\n    } else {\r\n        if(res.resultCode === 10) dispatch(getCaptchaUrl());\r\n        if(res.messages.length) dispatch(stopSubmit(\"login\", {_error: message}))\r\n    }\r\n}\r\n\r\nexport const logOut = () => async (dispatch) => {\r\n    const res = await authApi.logOut()\r\n\r\n    if(res.resultCode === 0) {\r\n        dispatch(setAuthUserInfo(null, null, null, false))\r\n        dispatch(setAuthUserData(null))\r\n    }\r\n}\r\n\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    const res = await securityApi.getCaptchaUrl();\r\n    dispatch(setCaptchaUrl(res.url))\r\n}\r\n\r\nexport default authReducer;","import {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport React from \"react\";\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if(!this.props.auth) return <Redirect to={\"/login\"} />\r\n\r\n            return <Component {...this.props} />\r\n        }\r\n\r\n    }\r\n\r\n    let mapStateToProps = (state) => ({\r\n        auth: state.auth.isAuth\r\n    })\r\n\r\n    return connect(mapStateToProps)(RedirectComponent)\r\n}","import {profileApi, usersApi} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst ADD_POST = \"ADD_POST\";\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\nconst SET_PHOTO = \"SET_PHOTO\";\r\n\r\nlet initialState = {\r\n    posts: [\r\n        // {id: 1, message: \"\", likeCount: 0}\r\n    ],\r\n    userProfile: null,\r\n    userProfileStatus: \"\"\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case ADD_POST:\r\n            return {\r\n                ...state,\r\n                posts: [\r\n                    ...state.posts,\r\n                    { ...action.payload }\r\n                ]\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                userProfile: action.userProfile\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                userProfileStatus: action.status\r\n            }\r\n        case SET_PHOTO:\r\n            return {\r\n                ...state,\r\n                userProfile: {\r\n                    ...state.userProfile,\r\n                    photos: action.photos\r\n                }\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const addPost = (newPostText) => (dispatch, getState) => {\r\n    const state = getState();\r\n    dispatch({\r\n        type: ADD_POST,\r\n        payload: {\r\n            id: new Date().getTime(),\r\n            message: newPostText,\r\n            likeCount: 0,\r\n            avatar: state.auth.userData.photos.small\r\n        }\r\n    })\r\n}\r\n\r\nexport const setUserProfile = (userProfile) => ({\r\n    type: SET_USER_PROFILE,\r\n    userProfile\r\n});\r\n\r\nexport const setStatus = (status) => ({\r\n    type: SET_STATUS,\r\n    status\r\n});\r\n\r\nexport const setPhoto = (photos) => ({\r\n    type: SET_PHOTO,\r\n    photos\r\n});\r\n\r\nexport const getUserInfo = (userId) => async (dispatch) => {\r\n    const res = await usersApi.getUserInfo(userId);\r\n    dispatch(setUserProfile(res));\r\n}\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    const res = await profileApi.getStatus(userId);\r\n    dispatch(setStatus(res));\r\n}\r\n\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    const res = await profileApi.updateStatus(status);\r\n    if(res === \"Что то пошло не так\") {\r\n        dispatch(stopSubmit(\"profile_status\", {_error: res}));\r\n    }\r\n    if(res.resultCode === 0) dispatch(setStatus(status));\r\n    return res\r\n}\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    const res = await profileApi.savePhoto(file);\r\n    if(res.resultCode === 0) dispatch(setPhoto(res.data.photos));\r\n}\r\n\r\nexport default profileReducer","import {dialogApi, usersApi} from \"../api/api\";\r\nimport {reset} from \"redux-form\";\r\n\r\n// const SEND_MESSAGE = \"DIALOGS/SEND_MESSAGE\";\r\nconst SET_DIALOGS  = \"DIALOGS/SET_DIALOGS\";\r\nconst SET_MESSAGES = \"DIALOGS/SET_MESSAGES\";\r\nconst UPDATE_MESSAGES = \"DIALOGS/UPDATE_MESSAGES\";\r\nconst SET_TOTAL_COUNT_MESSAGES = \"DIALOGS/SET_TOTAL_COUNT_MESSAGES\";\r\nconst SET_PAGE_MESSAGES = \"DIALOGS/SET_PAGE_MESSAGES\";\r\nconst RESET_MESSAGES = \"DIALOGS/RESET_MESSAGES\";\r\nconst SET_INTERLOCUTOR = \"DIALOGS/SET_INTERLOCUTOR\";\r\nconst RESET_INTERLOCUTOR = \"DIALOGS/RESET_INTERLOCUTOR\";\r\nconst SET_IS_TOTAL_LOAD_MESSAGES = \"DIALOGS/SET_IS_TOTAL_LOAD_MESSAGES\";\r\nconst RESET_TO_DEFAULT_STATE = \"DIALOGS/RESET_TO_DEFAULT_STATE\";\r\n\r\nlet initialState = {\r\n    dialogs: [],\r\n    messages: [],\r\n    pageMessages: 1,\r\n    countMessages: 20,\r\n    totalCountMessages: null,\r\n    interlocutor: null,\r\n    isTotalLoadMessages: false\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case RESET_TO_DEFAULT_STATE:{\r\n            return {\r\n                    ...initialState\r\n                };\r\n            }\r\n        case SET_DIALOGS:{\r\n            return {\r\n                ...state,\r\n                dialogs: [\r\n                    ...action.payload\r\n                ]\r\n            };\r\n        }\r\n        case SET_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                messages: [\r\n                    ...action.payload\r\n                ]\r\n            };\r\n        }\r\n        case UPDATE_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                messages: [\r\n                    ...action.payload,\r\n                    ...state.messages\r\n                ]\r\n            };\r\n        }\r\n        case RESET_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                messages: []\r\n            };\r\n        }\r\n        case SET_TOTAL_COUNT_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                totalCountMessages: action.payload\r\n            };\r\n        }\r\n        case SET_PAGE_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                pageMessages: action.payload\r\n            };\r\n        }\r\n        case SET_INTERLOCUTOR:{\r\n            return {\r\n                ...state,\r\n                interlocutor: action.payload\r\n            };\r\n        }\r\n        case RESET_INTERLOCUTOR:{\r\n            return {\r\n                ...state,\r\n                interlocutor: null\r\n            };\r\n        }\r\n        case SET_IS_TOTAL_LOAD_MESSAGES:{\r\n            return {\r\n                ...state,\r\n                isTotalLoadMessages: action.payload\r\n            };\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const setDialogs = (payload) => ({\r\n    type: SET_DIALOGS,\r\n    payload\r\n})\r\nexport const setMessages = (payload) => ({\r\n    type: SET_MESSAGES,\r\n    payload\r\n})\r\nexport const updateMessages = (payload) => ({\r\n    type: UPDATE_MESSAGES,\r\n    payload\r\n})\r\nexport const resetMessages = () => ({\r\n    type: RESET_MESSAGES\r\n})\r\nexport const setTotalCountMessages = (payload) => ({\r\n    type: SET_TOTAL_COUNT_MESSAGES,\r\n    payload\r\n})\r\nexport const setPageMessages = (payload) => ({\r\n    type: SET_PAGE_MESSAGES,\r\n    payload\r\n})\r\nexport const setInterlocutor = (payload) => ({\r\n    type: SET_INTERLOCUTOR,\r\n    payload\r\n})\r\nexport const resetInterlocutor = () => ({\r\n    type: RESET_INTERLOCUTOR\r\n})\r\nexport const setIsTotalLoadMessages = (payload) => ({\r\n    type: SET_IS_TOTAL_LOAD_MESSAGES,\r\n    payload\r\n})\r\n\r\nexport const resetToDefaultState = () => ({\r\n    type: RESET_TO_DEFAULT_STATE\r\n})\r\n\r\nexport const getDialogs = () => async (dispatch) => {\r\n    let res = await dialogApi.getDialogs()\r\n    if(Array.isArray(res)) {\r\n        dispatch(setDialogs(res))\r\n    }\r\n}\r\nexport const getMessages = (userId, pageMessagesNumber) => async (dispatch, getState) => {\r\n    const state = getState().dialogsPage;\r\n    const pageMessages = pageMessagesNumber ? state.pageMessages + pageMessagesNumber : state.pageMessages;\r\n\r\n    let res = await dialogApi.getMessages(userId, pageMessages, state.countMessages);\r\n\r\n    if(Array.isArray(res.items)) {\r\n        if(res.items.length) {\r\n            if(res.items.length < state.countMessages) {\r\n                dispatch(setIsTotalLoadMessages(true));\r\n            }\r\n            if(pageMessagesNumber) {\r\n                dispatch(updateMessages(res.items))\r\n            } else {\r\n                dispatch(setMessages(res.items));\r\n            }\r\n        } else {\r\n            dispatch(setIsTotalLoadMessages(true));\r\n        }\r\n    }\r\n    if(res.totalCount) {\r\n        dispatch(setTotalCountMessages(res.totalCount));\r\n    }\r\n    if(pageMessagesNumber) {\r\n        dispatch(setPageMessages(pageMessages));\r\n    }\r\n}\r\nexport const startChatting = (userId) => async (dispatch) => {\r\n    let res = await dialogApi.startChatting(userId);\r\n    console.log(res)\r\n}\r\nexport const sendMessage = (userId, message) => async (dispatch) => {\r\n    let res = await dialogApi.sendMessage(userId, message);\r\n    if(res.resultCode === 0){\r\n        dispatch(reset(\"sender_message\"))\r\n        dispatch(getMessages(userId))\r\n    }\r\n}\r\nexport const getInterlocutor = (userId) => async (dispatch) => {\r\n    let res = await usersApi.getUserInfo(userId);\r\n    dispatch(setInterlocutor(res))\r\n}\r\n\r\nexport default dialogsReducer;","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"7cd30b10-bcea-4706-97f2-e4e46663ae06\"\r\n    }\r\n});\r\n\r\nexport const usersApi = {\r\n    getUsers(currentPage = 1, pageSize = 10, term, friend) {\r\n        let isTerm = term ? `&term=${term}` : ``;\r\n        let isFriend = friend ? `&friend=true` : ``;\r\n        return instance.get(`users?count=${pageSize}&page=${currentPage}${isTerm}${isFriend}`).then(res => res.data)\r\n    },\r\n    addFollow(userId) {\r\n        return instance.post(`follow/${userId}`).then(res => res.data).catch(err => err)\r\n    },\r\n    deleteFollow(userId) {\r\n        return instance.delete(`follow/${userId}`).then(res => res.data).catch(err => err)\r\n    },\r\n    getUserInfo(userId) {\r\n        return instance.get(`profile/${userId}`).then(res => res.data)\r\n    },\r\n    getStatusProfile(userId) {\r\n        return instance.get(`profile/status/${userId}`).then(res => res.data).catch(err => err)\r\n    },\r\n    setAuthUserStatus(status) {\r\n        return instance.put(`profile/status`, {status}).then(res => res.data).catch(err => err)\r\n    }\r\n}\r\n\r\nexport const dialogApi = {\r\n    getDialogs() {\r\n        return instance.get(`dialogs/`).then(res => res.data)\r\n    },\r\n    getMessages(userId, page = 1, count = 20) {\r\n        return instance.get(`dialogs/${userId}/messages?page=${page}&count=${count}`).then(res => res.data).catch(err => err)\r\n    },\r\n    sendMessage(userId, message) {\r\n        return instance.post(`dialogs/${userId}/messages`, {body: message}).then(res => res.data).catch(err => err)\r\n    },\r\n    startChatting(userId) {\r\n        return instance.put(`dialogs/${userId}`).then(res => res.data).catch(err => err)\r\n    },\r\n}\r\n\r\nexport const profileApi = {\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/${userId}`).then(res => res.data).catch(err => err)\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status`, {status})\r\n            .then(res => res.data)\r\n            .catch(err => \"Что то пошло не так\")\r\n    },\r\n    savePhoto(file) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", file);\r\n\r\n        return instance.put(`profile/photo`, formData, {\r\n            headers: {\"Content-Type\" : \"multipart/form-data\"}\r\n        }).then(res => res.data).catch(err => err)\r\n    },\r\n    updateProfileData(data) {\r\n        return instance.put(`profile`, {...data}).then(res => res.data).catch(err => err)\r\n    }\r\n}\r\n\r\nexport const authApi = {\r\n    me() {\r\n        return instance.get(`auth/me`).then(res => res.data).catch(err => err)\r\n    },\r\n    logIn(email, password, rememberMe = false, captcha) {\r\n        return instance.post(`/auth/login`, {email, password, rememberMe, captcha}).then(res => res.data).catch(err => err)\r\n    },\r\n    logOut() {\r\n        return instance.delete(`/auth/login`).then(res => res.data).catch(err => err)\r\n    }\r\n}\r\n\r\nexport const securityApi = {\r\n    getCaptchaUrl() {\r\n        return instance.get(`security/get-captcha-url`).then(res => res.data).catch(err => err)\r\n    }\r\n}\r\n\r\n\r\n","const SAVE = \"SAVE\";\r\n\r\nconst initialStorage = () => {\r\n    let obj = {};\r\n    if(localStorage.length) {\r\n        try {\r\n            Object.keys(localStorage).forEach(field => {\r\n                obj[field] = JSON.parse(localStorage[field])\r\n            });\r\n        }  catch (error) {}\r\n    }\r\n    return obj\r\n}\r\n\r\nconst localStorageReducer = (state = initialStorage(), action) => {\r\n    switch(action.type) {\r\n        case SAVE: {\r\n            if(action.value) {\r\n                localStorage.setItem(action.key, JSON.stringify(action.value));\r\n            }\r\n            return {\r\n                ...state,\r\n                notes: action.value\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const save = (key, value) => ({\r\n    type: SAVE,\r\n    key,\r\n    value\r\n});\r\n\r\n// export const load = (file) => async (dispatch) => {\r\n//     let obj = {};\r\n//     if(localStorage.length) {\r\n//         Object.keys(localStorage).forEach(field => {\r\n//             obj[field] = JSON.parse(localStorage[field])\r\n//         });\r\n//     }\r\n// }\r\n\r\nexport default localStorageReducer","import {profileApi} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst THEME = \"THEME\";\r\n\r\nlet initialState = {\r\n    theme: \"light\",\r\n    themeList: [\r\n        {value: 'Светлая', label: 'Светлая'},\r\n        {value: 'Темная', label: 'Темная'}\r\n    ],\r\n    language: \"russian\",\r\n    languageList: [\r\n        {value: 'Русский', label: 'Русский'},\r\n        {value: 'Английский', label: 'Английский'}\r\n    ]\r\n}\r\n\r\nconst settingReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case THEME:\r\n            return {\r\n                ...state\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setTheme = (theme) => ({\r\n    type: THEME,\r\n    theme\r\n});\r\n\r\nexport const updateProfileData = (data) => async (dispatch) => {\r\n    const res = await profileApi.updateProfileData(data);\r\n\r\n    if(res.resultCode === 0) {\r\n        dispatch(getAuthUserData(data.userId));\r\n    }\r\n\r\n    if(res.messages && res.messages.length) {\r\n        let obj = {}\r\n        let messageText = \"Недопустимый формат URL-адреса\"\r\n        res.messages.forEach(item => {\r\n            if(item === \"Invalid url format (Contacts->Instagram)\") obj.instagram = messageText\r\n            if(item === \"Invalid url format (Contacts->Facebook)\")  obj.facebook = messageText\r\n            if(item === \"Invalid url format (Contacts->MainLink)\")  obj.mainLink = messageText\r\n            if(item === \"Invalid url format (Contacts->Website)\")   obj.website = messageText\r\n            if(item === \"Invalid url format (Contacts->Twitter)\")   obj.twitter = messageText\r\n            if(item === \"Invalid url format (Contacts->Youtube)\")   obj.youtube = messageText\r\n            if(item === \"Invalid url format (Contacts->Github)\")    obj.github = messageText\r\n            if(item === \"Invalid url format (Contacts->Vk)\")        obj.vk = messageText\r\n        })\r\n\r\n        dispatch(stopSubmit(\"profile_data\", {contacts: {...obj}, _error: \"\" }))\r\n    }\r\n\r\n    if(res.resultCode !== 0 && !res.messages ){\r\n        dispatch(stopSubmit(\"profile_data\", {_error: \"Что то пошло не так\" }))\r\n    }\r\n}\r\n\r\nexport default settingReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav___7Bu2\",\"item\":\"Navbar_item__Fdh0K\",\"active\":\"Navbar_active__p8n4x\",\"item_img\":\"Navbar_item_img__2QSRY\"};","export const updateObjInArray = (items, updateItemId, findPropsName, updateProps) => {\r\n    return items.map(item => {\r\n        return item[\"id\"] === updateItemId\r\n            ? {...item, ...updateProps}\r\n            : item;\r\n    })\r\n}","import {usersApi} from \"../api/api\";\r\nimport {updateObjInArray} from \"../utils/helpers\";\r\n\r\nconst FOLLOW = \"FOLLOW\";\r\nconst UNFOLLOW = \"UNFOLLOW\";\r\nconst SET_USERS = \"SET_USERS\";\r\nconst SET_TOTAL_COUNT_USERS = \"SET_TOTAL_COUNT_USERS\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst SET_FOLLOWS_FETCHING = \"SET_FOLLOWS_FETCHING\";\r\n\r\nlet initialState = {\r\n    users: [],\r\n    totalCountUsers: 0,\r\n    currentPage: 1,\r\n    pageSize: 20,\r\n    isFetching: false,\r\n    followsFetching: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjInArray(state.users, action.userId, \"id\",{followed: true})\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjInArray(state.users, action.userId, \"id\", {followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n            }\r\n        case SET_TOTAL_COUNT_USERS:\r\n            return {\r\n                ...state,\r\n                totalCountUsers: action.totalCount\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        case SET_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case SET_FOLLOWS_FETCHING:\r\n            return {\r\n                ...state,\r\n                followsFetching: action.followsFetching\r\n                    ? [...state.followsFetching, action.userId]\r\n                    : state.followsFetching.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setFollow = (userId) => ({\r\n    type: FOLLOW,\r\n    userId\r\n});\r\n\r\nexport const setUnfollow = (userId) => ({\r\n    type: UNFOLLOW,\r\n    userId\r\n});\r\n\r\nexport const setUsers = (users) => ({\r\n    type: SET_USERS,\r\n    users\r\n});\r\n\r\nexport const setTotalCountUsers = (totalCount) => ({\r\n    type: SET_TOTAL_COUNT_USERS,\r\n    totalCount\r\n});\r\n\r\nexport const setCurrentPage = (currentPage) => ({\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage\r\n});\r\n\r\nexport const setIsFetching = (isFetching) => ({\r\n    type: SET_IS_FETCHING,\r\n    isFetching\r\n});\r\n\r\nexport const setFollowsFetching = (followsFetching, userId) => ({\r\n    type: SET_FOLLOWS_FETCHING,\r\n    followsFetching,\r\n    userId\r\n});\r\n\r\nexport const getUsers = (currentPage, pageSize, term, friend) => async (dispatch) => {\r\n    dispatch(setIsFetching(true));\r\n    const data = await usersApi.getUsers(currentPage, pageSize, term, friend);\r\n    dispatch(setIsFetching(false));\r\n    dispatch(setTotalCountUsers(data.totalCount));\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(setUsers(data.items));\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(setFollowsFetching(true, userId));\r\n\r\n    const data = await apiMethod(userId);\r\n\r\n    if(data.resultCode === 0) {\r\n        dispatch(setFollowsFetching(false, userId));\r\n        dispatch(actionCreator(userId));\r\n    } else {\r\n        dispatch(setFollowsFetching(false, userId));\r\n    }\r\n}\r\n\r\nexport const follow = (userId) => (dispatch) => {\r\n    followUnfollowFlow(dispatch, userId, usersApi.addFollow.bind(usersApi), setFollow);\r\n}\r\n\r\nexport const unfollow = (userId) => (dispatch) => {\r\n    followUnfollowFlow(dispatch, userId, usersApi.deleteFollow.bind(usersApi), setUnfollow);\r\n}\r\n\r\nexport default usersReducer"],"sourceRoot":""}